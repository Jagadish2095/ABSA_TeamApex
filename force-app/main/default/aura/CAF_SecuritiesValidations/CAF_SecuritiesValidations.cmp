<aura:component implements="force:hasRecordId,flexipage:availableForAllPageTypes" access="global"  controller="CAF_Sanctioning_Controller">
    
    <aura:handler name="init" value="{!this}" action="{!c.init}" />
    
    <aura:attribute name="exchangeRegulationOptions" type="List" default="[
                                                                          {'label': 'Yes', 'value': 'YES'},
                                                                          {'label': 'No', 'value': 'NO'},
                                                                          {'label': 'Not Applicable', 'value': 'N/A'}
                                                                          ]"/>
    <aura:attribute name="reserveBankApprovalOptions" type="List" default="[
                                                                           {'label': 'Yes', 'value': 'YES'},
                                                                           {'label': 'No', 'value': 'NO'},
                                                                           {'label': 'Not Applicable', 'value': 'N/A'}
                                                                           ]"/>
    
    <aura:attribute name="statusCapturedOnCIFOptions" type="List" default="[
                                                                           {'label': 'Yes', 'value': 'YES'},
                                                                           {'label': 'No', 'value': 'NO'},
                                                                           {'label': 'Not Applicable', 'value': 'N/A'}
                                                                           ]"/>
    <aura:attribute name="monthlyPOAOptions" type="List" default="[
                                                                  {'label': 'Yes', 'value': 'YES'},
                                                                  {'label': 'No', 'value': 'NO'},
                                                                  {'label': 'Not Applicable', 'value': 'N/A'}
                                                                  ]"/>
    <aura:attribute name="annualPOAOptions" type="List" default="[
                                                                 {'label': 'Yes', 'value': 'YES'},
                                                                 {'label': 'No', 'value': 'NO'},
                                                                 {'label': 'Not Applicable', 'value': 'N/A'}
                                                                 ]"/>
    <aura:attribute name="muniBillsOptions" type="List" default="[
                                                                 {'label': 'Yes', 'value': 'YES'},
                                                                 {'label': 'No', 'value': 'NO'},
                                                                 {'label': 'Not Applicable', 'value': 'N/A'}
                                                                 ]"/>
    <aura:attribute name="verificationDocsValidatedIDDocOptions" type="List" default="[
                                                                                      {'label': 'Yes', 'value': 'YES'},
                                                                                      {'label': 'No', 'value': 'NO'},
                                                                                      {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                      ]"/>
    <aura:attribute name="sOARecByEmailOptions" type="List" default="[
                                                                     {'label': 'Yes', 'value': 'YES'},
                                                                     {'label': 'No', 'value': 'NO'},
                                                                     {'label': 'Not Applicable', 'value': 'N/A'}
                                                                     ]"/>
    <aura:attribute name="sOARecByPOBOXOptions" type="List" default="[
                                                                     {'label': 'Yes', 'value': 'YES'},
                                                                     {'label': 'No', 'value': 'NO'},
                                                                     {'label': 'Not Applicable', 'value': 'N/A'}
                                                                     ]"/>
    <aura:attribute name="pOIValidatedAndSignedOptions" type="List" default="[
                                                                             {'label': 'Yes', 'value': 'YES'},
                                                                             {'label': 'No', 'value': 'NO'},
                                                                             {'label': 'Not Applicable', 'value': 'N/A'}
                                                                             ]"/>
    <aura:attribute name="pOIDealershipFICertifyingOptions" type="List" default="[
                                                                                 {'label': 'Yes', 'value': 'YES'},
                                                                                 {'label': 'No', 'value': 'NO'},
                                                                                 {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                 ]"/>
    <aura:attribute name="pOIVerificationDateOptions" type="List" default="[
                                                                           {'label': 'Yes', 'value': 'YES'},
                                                                           {'label': 'No', 'value': 'NO'},
                                                                           {'label': 'Not Applicable', 'value': 'N/A'}
                                                                           ]"/>
    <aura:attribute name="pOICopiesClearLegibleOptions" type="List" default="[
                                                                             {'label': 'Yes', 'value': 'YES'},
                                                                             {'label': 'No', 'value': 'NO'},
                                                                             {'label': 'Not Applicable', 'value': 'N/A'}
                                                                             ]"/>
    <aura:attribute name="pOINamesMatchIDDocumentOptions" type="List" default="[
                                                                               {'label': 'Yes', 'value': 'YES'},
                                                                               {'label': 'No', 'value': 'NO'},
                                                                               {'label': 'Not Applicable', 'value': 'N/A'}
                                                                               ]"/>
    <aura:attribute name="pOICertifiedCopiesOptions" type="List" default="[
                                                                          {'label': 'Yes', 'value': 'YES'},
                                                                          {'label': 'No', 'value': 'NO'},
                                                                          {'label': 'Not Applicable', 'value': 'N/A'}
                                                                          ]"/>
    <aura:attribute name="iDNumberAllRelatedPartiesCheckedOptions" type="List" default="[
                                                                                        {'label': 'Yes', 'value': 'YES'},
                                                                                        {'label': 'No', 'value': 'NO'},
                                                                                        {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                        ]"/>
    <aura:attribute name="primaryCustomerScreeningCompleteOptions" type="List" default="[
                                                                                        {'label': 'Yes', 'value': 'YES'},
                                                                                        {'label': 'No', 'value': 'NO'},
                                                                                        {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                        ]"/>
    <aura:attribute name="secondTierOptions" type="List" default="[
                                                                  {'label': 'Yes', 'value': 'YES'},
                                                                  {'label': 'No', 'value': 'NO'},
                                                                  {'label': 'Not Applicable', 'value': 'N/A'}
                                                                  ]"/>
    <aura:attribute name="qAOptions" type="List" default="[
                                                          {'label': 'Yes', 'value': 'YES'},
                                                          {'label': 'No', 'value': 'NO'},
                                                          {'label': 'Not Applicable', 'value': 'N/A'}
                                                          ]"/>
    <aura:attribute name="proofOfAddressOptions" type="List" default="[
                                                                      {'label': 'Yes', 'value': 'YES'},
                                                                      {'label': 'No', 'value': 'NO'},
                                                                      {'label': 'Not Applicable', 'value': 'N/A'}
                                                                      ]"/>
    
    <aura:attribute name="relatedPartiesScreeningCompletedOptions" type="List" default="[
                                                                                        {'label': 'Yes', 'value': 'YES'},
                                                                                        {'label': 'No', 'value': 'NO'},
                                                                                        {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                        ]"/>
    <aura:attribute name="independentCIPRODocumentObtainedOptions" type="List" default="[
                                                                                        {'label': 'Yes', 'value': 'YES'},
                                                                                        {'label': 'No', 'value': 'NO'},
                                                                                        {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                        ]"/>
    <aura:attribute name="cIFValCIF07Options" type="List" default="[
                                                                   {'label': 'Yes', 'value': 'YES'},
                                                                   {'label': 'No', 'value': 'NO'},
                                                                   {'label': 'Not Applicable', 'value': 'N/A'}
                                                                   ]"/>
    <aura:attribute name="cIFAddressValidatedOptions" type="List" default="[
                                                                           {'label': 'Yes', 'value': 'YES'},
                                                                           {'label': 'No', 'value': 'NO'},
                                                                           {'label': 'Not Applicable', 'value': 'N/A'}
                                                                           ]"/>
    <aura:attribute name="creditAGMTNameRegistrationCIFOptions" type="List" default="[
                                                                                     {'label': 'Yes', 'value': 'YES'},
                                                                                     {'label': 'No', 'value': 'NO'},
                                                                                     {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                     ]"/>
    <aura:attribute name="signedMandatedSanctionerOptions" type="List" default="[
                                                                                {'label': 'Yes', 'value': 'YES'},
                                                                                {'label': 'No', 'value': 'NO'},
                                                                                {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                ]"/>
    <aura:attribute name="isValidHasNotExpiredOptions" type="List" default="[
                                                                            {'label': 'Yes', 'value': 'YES'},
                                                                            {'label': 'No', 'value': 'NO'},
                                                                            {'label': 'Not Applicable', 'value': 'N/A'}
                                                                            ]"/>
    <aura:attribute name="sMSSecuritiesApprovalConditionsOptions" type="List" default="[
                                                                                       {'label': 'Yes', 'value': 'YES'},
                                                                                       {'label': 'No', 'value': 'NO'},
                                                                                       {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                       ]"/>
    <aura:attribute name="draftedByBusinessBankOptions" type="List" default="[
                                                                             {'label': 'Yes', 'value': 'YES'},
                                                                             {'label': 'No', 'value': 'NO'},
                                                                             {'label': 'Not Applicable', 'value': 'N/A'}
                                                                             ]"/>
    <aura:attribute name="draftedByCAFPCOptions" type="List" default="[
                                                                      {'label': 'Yes', 'value': 'YES'},
                                                                      {'label': 'No', 'value': 'NO'},
                                                                      {'label': 'Not Applicable', 'value': 'N/A'}
                                                                      ]"/>
    <aura:attribute name="suretyshipLegallyCorrectOptions" type="List" default="[
                                                                                {'label': 'Yes', 'value': 'YES'},
                                                                                {'label': 'No', 'value': 'NO'},
                                                                                {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                ]"/>
    <aura:attribute name="correctSuretyDocumentsOptions" type="List" default="[
                                                                              {'label': 'Yes', 'value': 'YES'},
                                                                              {'label': 'No', 'value': 'NO'},
                                                                              {'label': 'Not Applicable', 'value': 'N/A'}
                                                                              ]"/>
    <aura:attribute name="otherSecurityDocumentationOptions" type="List" default="[
                                                                                  {'label': 'Yes', 'value': 'YES'},
                                                                                  {'label': 'No', 'value': 'NO'},
                                                                                  {'label': 'Not Applicable', 'value': 'N/A'}
                                                                                  ]"/>
    <aura:attribute name="transactionResolutionOptions" type="List" default="[
                                                                             {'label': 'Yes', 'value': 'YES'},
                                                                             {'label': 'No', 'value': 'NO'},
                                                                             {'label': 'Not Applicable', 'value': 'N/A'}
                                                                             ]"/>
    <aura:attribute name="securityResolutionOptions" type="List" default="[
                                                                          {'label': 'Yes', 'value': 'YES'},
                                                                          {'label': 'No', 'value': 'NO'},
                                                                          {'label': 'Not Applicable', 'value': 'N/A'}
                                                                          ]"/>
    <aura:attribute name="section45LetterOptions" type="List" default="[
                                                                       {'label': 'Yes', 'value': 'YES'},
                                                                       {'label': 'No', 'value': 'NO'},
                                                                       {'label': 'Not Applicable', 'value': 'N/A'}
                                                                       ]"/>
    
    <aura:attribute name="recordId" type="Id" /> 
    <aura:attribute name="applicationProductId" type="String" />
    <aura:attribute name="approvalStatus" type="String" />
    <aura:attribute name="approvalDecisionComment" type="String"/>
    <aura:attribute name="selectOptions" type="List" />
    <aura:attribute name="isExchangeRegulation" type="Boolean" default="false"/>
    <aura:attribute name="isGrantSecurities" type="Boolean" default="false"/>
    <aura:attribute name="isSubmitApproval" type="Boolean" default="false"/>
    <aura:attribute name="isRejectSecurities" type="Boolean" default="false"/>
    <aura:attribute name="isSubmitRejection" type="Boolean" default="false"/>
    <aura:attribute name="isSubmitDecision" type="Boolean" default="false"/>
    <aura:attribute name="exchangeRegulationValue" type="String"/>
    <aura:attribute name="exchangeRegulation" type="String"/>
    <aura:attribute name="reserveBankApprovalValue" type="String"/>
    <aura:attribute name="reserveBankApproval" type="String"/>
    <aura:attribute name="statusCapturedOnCIFValue" type="String"/>
    <aura:attribute name="statusCapturedOnCIF" type="String"/>
    <aura:attribute name="monthlyPOAValue" type="String"/>
    <aura:attribute name="monthlyPOA" type="String"/>
    <aura:attribute name="annualPOAValue" type="String"/>
    <aura:attribute name="annualPOA" type="String"/>
    <aura:attribute name="muniBillsFValue" type="String"/>
    <aura:attribute name="muniBills" type="String"/>
    <aura:attribute name="verificationDocsValidatedIDDocValue" type="String"/>
    <aura:attribute name="verificationDocsValidatedIDDoc" type="String"/>
    <aura:attribute name="sOARecByEmailValue" type="String"/>
    <aura:attribute name="sOARecByEmail" type="String"/>
    <aura:attribute name="sOARecByPOBOXValue" type="String"/>
    <aura:attribute name="sOARecByPOBOX" type="String"/>
    <aura:attribute name="pOIValidatedAndSignedValue" type="String"/>
    <aura:attribute name="pOIValidatedAndSigned" type="String"/>
    <aura:attribute name="pOIDealershipFICertifyingValue" type="String"/>
    <aura:attribute name="pOIDealershipFICertifying" type="String"/>
    <aura:attribute name="pOIVerificationDateValue" type="String"/>
    <aura:attribute name="pOIVerificationDate" type="String"/>
    <aura:attribute name="pOICopiesClearLegibleValue" type="String"/>
    <aura:attribute name="pOICopiesClearLegible" type="String"/>
    <aura:attribute name="pOINamesMatchIDDocumentValue" type="String"/>
    <aura:attribute name="pOINamesMatchIDDocument" type="String"/>
    <aura:attribute name="pOICertifiedCopiesValue" type="String"/>
    <aura:attribute name="pOICertifiedCopies" type="String"/>
    <aura:attribute name="iDNumberAllRelatedPartiesCheckedValue" type="String"/>
    <aura:attribute name="iDNumberAllRelatedPartiesChecked" type="String"/>
    <aura:attribute name="primaryCustomerScreeningCompleteValue" type="String"/>
    <aura:attribute name="primaryCustomerScreeningComplete" type="String"/>
    <aura:attribute name="secondTierValue" type="String"/>
    <aura:attribute name="secondTier" type="String"/>
    <aura:attribute name="qAValue" type="String"/>
    <aura:attribute name="qA" type="String"/>
    <aura:attribute name="proofOfAddressValue" type="String"/>
    <aura:attribute name="proofOfAddress" type="String"/>
    <aura:attribute name="relatedPartiesScreeningCompletedValue" type="String"/>
    <aura:attribute name="relatedPartiesScreeningCompleted" type="String"/>
    <aura:attribute name="independentCIPRODocumentObtainedValue" type="String"/>
    <aura:attribute name="independentCIPRODocumentObtained" type="String"/>
    <aura:attribute name="cIFValCIF07Value" type="String"/>
    <aura:attribute name="cIFValCIF07" type="String"/>
    <aura:attribute name="cIFAddressValidatedValue" type="String"/>
    <aura:attribute name="cIFAddressValidated" type="String"/>
    <aura:attribute name="creditAGMTNameRegistrationCIValue" type="String"/>
    <aura:attribute name="creditAGMTNameRegistrationCI" type="String"/>
    <aura:attribute name="signedMandatedSanctionerValue" type="String"/>
    <aura:attribute name="signedMandatedSanctioner" type="String"/>
    <aura:attribute name="isValidHasNotExpiredValue" type="String"/>
    <aura:attribute name="isValidHasNotExpired" type="String"/>
    <aura:attribute name="sMSSecuritiesApprovalConditionsValue" type="String"/>
    <aura:attribute name="sMSSecuritiesApprovalConditions" type="String"/>
    <aura:attribute name="draftedByBusinessBankValue" type="String"/>
    <aura:attribute name="draftedByBusinessBank" type="String"/>
    <aura:attribute name="draftedByCAFPCValue" type="String"/>
    <aura:attribute name="draftedByCAFPC" type="String"/>
    <aura:attribute name="suretyshipLegallyCorrectValue" type="String"/>
    <aura:attribute name="suretyshipLegallyCorrect" type="String"/>
    <aura:attribute name="correctSuretyDocumentsValue" type="String"/>
    <aura:attribute name="correctSuretyDocuments" type="String"/>
    <aura:attribute name="otherSecurityDocumentationValue" type="String"/>
    <aura:attribute name="otherSecurityDocumentation" type="String"/>
    <aura:attribute name="transactionResolutionValue" type="String"/>
    <aura:attribute name="transactionResolution" type="String"/>
    <aura:attribute name="securityResolutionValue" type="String"/>
    <aura:attribute name="securityResolution" type="String"/>
    <aura:attribute name="section45LetterValue" type="String"/>
    <aura:attribute name="section45Letter" type="String"/>
    <aura:attribute name="commentTextArea" type="String"/>
    <aura:attribute name="gridData" type="Object" access="public" />
    <aura:attribute name="gridColumns" type="List" access="PRIVATE" />
    <aura:attribute name="activeSections" type="List" default="['SecurityValidator']" />
    <aura:attribute name="activeSections2" type="List" default="['SecurityValidatorDecision','decisionHistory']" />
    <!--<aura:attribute name="sendToVal" type="String" default=""/>-->	
    <aura:attribute name="isCompReadOnly" type="Boolean" />	
    <aura:attribute name="oldCaseOwnerId" type="String" default=""/>
    <div class="exampleHolder">
        <lightning:spinner aura:id="mySpinner" class="slds-hide" alternativeText="Loading..." variant="brand" size="large"/>
    </div>
    <!--<div class="mainDiv" style="{!or(v.sendToVal =='Security Validator',v.sendToVal =='') ? '' : 'pointer-events:none!important' }">-->	
    <div class="mainDiv" style="{!!v.isCompReadOnly ? '' : 'pointer-events:none!important' }">
        <lightning:recordEditForm aura:id="securitiesValidationForm" objectApiName="Case" recordId="{!v.recordId}"
                                  onload="" onsuccess="" onerror="">
            <lightning:accordion activeSectionName="{! v.activeSections }" allowMultipleSectionsOpen="true" >
                <lightning:accordionSection name="SecurityValidator" label="Security Validator Checklist">    
                    
                    <div><p><b>Security Validation - CAF</b></p></div>
                    
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="exchangeRegulationGroup"
                                                      label="Exchange Regulation 3(1) - Does it apply"
                                                      options="{!v.exchangeRegulationOptions}" value="{!v.exchangeRegulation}"
                                                      onchange="{!c.handleExchangeRegulation}" type="button" />
                                <lightning:inputField aura:id="exchangeRegulationValue" fieldName="SV_Exchange_Regulation_3_1__c" class="slds-hide"/>                                    
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <aura:if isTrue="{!v.isExchangeRegulation}"> 
                                    <lightning:radioGroup aura:id="reserveBankApprovalGroup"
                                                          label="Exchange Regulation 3(1) - If applicable was a copy of the Reserve Bank approval received"
                                                          options="{!v.reserveBankApprovalOptions}" value="{!v.reserveBankApproval}"
                                                          onchange="{!c.handleReserveBankApproval}" type="button" />
                                    <lightning:inputField aura:id="reserveBankApprovalValue" fieldName="SV_Reserve_Bank_Approval_Received__c" class="slds-hide"/>                 
                                    
                                </aura:if>  
                            </span>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <aura:if isTrue="{!v.isExchangeRegulation}"> 
                                    <lightning:radioGroup aura:id="statusCapturedOnCIFGroup"
                                                          label="Exchange Regulation 3(1) - If applicable, is the status of the person captured on CIF"
                                                          options="{!v.statusCapturedOnCIFOptions}" value="{!v.statusCapturedOnCIF}"
                                                          onchange="{!c.handleStatusCapturedOnCIF}" type="button" />
                                    <lightning:inputField aura:id="statusCapturedOnCIFValue" fieldName="SV_Status_Captured_On_CIF__c" class="slds-hide"/>                            
                                    
                                </aura:if>  
                            </span>
                        </div>
                    </div>
                    <br/>
                    
                    
                    
                    <div><p><b>Security Validation - Proof of Address</b></p></div>   
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="monthlyPOAGroup"
                                                      label="Not Older Than 3 Months As At Date Of Verification - When Issued Monthly"
                                                      options="{!v.monthlyPOAOptions}" value="{!v.monthlyPOA}"
                                                      onchange="{!c.handleMonthlyPOA}" type="button" />
                                <lightning:inputField aura:id="monthlyPOAValue" fieldName="SV_Monthly_POA_3_Months__c" class="slds-hide"/>                                    
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="annualPOAGroup"
                                                      label="Not Older Than A Year As At Date Of Verification - When Issued Annually"
                                                      options="{!v.annualPOAOptions}" value="{!v.annualPOA}"
                                                      onchange="{!c.handleAnnualPOA}" type="button" />
                                <lightning:inputField aura:id="annualPOAValue" fieldName="SV_Annual_POA_1_Year__c" class="slds-hide"/>
                            </span>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="muniBillsGroup"
                                                      label="Municipality Bills (Sent To Postal Address Address Or Via Email)"
                                                      options="{!v.muniBillsOptions}" value="{!v.muniBills}"
                                                      onchange="{!c.handleMuniBills}" type="button" />
                                <lightning:inputField aura:id="muniBillsValue" fieldName="SV_Muni_Bills_Sent_Address_Email__c" class="slds-hide"/>
                            </span>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="verificationDocsValidatedIDDocGroup"
                                                      label="Validation Of The Above Verification Documents Is The Same As For Identification Doc"
                                                      options="{!v.verificationDocsValidatedIDDocOptions}" value="{!v.verificationDocsValidatedIDDoc}"
                                                      onchange="{!c.handleVerificationDocsValidatedIDDoc}" type="button" />
                                <lightning:inputField aura:id="verificationDocsValidatedIDDocValue" fieldName="SV_Verification_Docs_Validated_As_ID_Doc__c" class="slds-hide"/>                                    
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="sOARecByEmailGroup"
                                                      label="Statements Of Accounts Received By Email With A Copy Of The Email (NCA Registered)"
                                                      options="{!v.sOARecByEmailOptions}" value="{!v.sOARecByEmail}"
                                                      onchange="{!c.handleSOARecByEmail}" type="button" />
                                <lightning:inputField aura:id="sOARecByEmailValue" fieldName="SV_SOA_Rec_By_Email_With_Copy_NCA_Reg__c" class="slds-hide"/>     
                            </span>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="sOARecByPOBOXGroup"
                                                      label="Statements Of Accounts Received By POBOX / Private Bag Must Reflect Customers Name"
                                                      options="{!v.sOARecByPOBOXOptions}" value="{!v.sOARecByPOBOX}"
                                                      onchange="{!c.handleSOARecByPOBOX}" type="button" />
                                <lightning:inputField aura:id="sOARecByPOBOXValue" fieldName="SV_SOA_Rec_By_POBOX_Private_Bag_Name__c" class="slds-hide"/>   
                            </span>
                        </div>               
                    </div>
                    <br/>
                    
                    
                    <div><p><b>Security Validation - Proof of Identification</b></p></div> 
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="pOIValidatedAndSignedGroup"
                                                      label="Validated and Signed as true copy of original"
                                                      options="{!v.pOIValidatedAndSignedOptions}" value="{!v.pOIValidatedAndSigned}"
                                                      onchange="{!c.handlePOIValidatedAndSigned}" type="button" />
                                <lightning:inputField aura:id="pOIValidatedAndSignedValue" fieldName="SV_POI_Validated_And_Signed_True_Copy__c" class="slds-hide"/>                                   
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="pOIDealershipFICertifyingGroup"
                                                      label="Name Of Dealership And FI Certifying The Document"
                                                      options="{!v.pOIDealershipFICertifyingOptions}" value="{!v.pOIDealershipFICertifying}"
                                                      onchange="{!c.handlePOIDealershipFICertifying}" type="button" />
                                <lightning:inputField aura:id="pOIDealershipFICertifyingValue" fieldName="SV_POI_Dealership_And_FI_Certifying__c" class="slds-hide"/>        
                            </span>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="pOIVerificationDateGroup"
                                                      label="Verification Date"
                                                      options="{!v.pOIVerificationDateOptions}" value="{!v.pOIVerificationDate}"
                                                      onchange="{!c.handlePOIVerificationDate}" type="button" />
                                <lightning:inputField aura:id="pOIVerificationDateValue" fieldName="SV_POI_Verification_Date__c" class="slds-hide"/>
                            </span>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="pOICopiesClearLegibleGroup"
                                                      label="Copies Must Be Clear And Legible"
                                                      options="{!v.pOICopiesClearLegibleOptions}" value="{!v.pOICopiesClearLegible}"
                                                      onchange="{!c.handlePOICopiesClearLegible}" type="button" />
                                <lightning:inputField aura:id="pOICopiesClearLegibleValue" fieldName="SV_POI_Copies_Must_Be_Clear_And_Legible__c" class="slds-hide"/>                            
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="pOINamesMatchIDDocumentGroup"
                                                      label="Proof Of Id Names Match Identification Document"
                                                      options="{!v.pOINamesMatchIDDocumentOptions}" value="{!v.pOINamesMatchIDDocument}"
                                                      onchange="{!c.handlePOINamesMatchIDDocument}" type="button" />
                                <lightning:inputField aura:id="pOINamesMatchIDDocumentValue" fieldName="SV_POI_Names_Match_ID_Document__c" class="slds-hide"/>    
                            </span>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="pOICertifiedCopiesGroup"
                                                      label="Proof Of Id Certified Copies"
                                                      options="{!v.pOICertifiedCopiesOptions}" value="{!v.pOICertifiedCopies}"
                                                      onchange="{!c.handlePOICertifiedCopies}" type="button" />
                                <lightning:inputField aura:id="pOICertifiedCopiesValue" fieldName="SV_POI_Certified_Copies__c" class="slds-hide"/>  
                            </span>
                        </div>       
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="iDNumberAllRelatedPartiesCheckedGroup"
                                                      label="Id Number Checked Of All Related Parties"
                                                      options="{!v.iDNumberAllRelatedPartiesCheckedOptions}" value="{!v.iDNumberAllRelatedPartiesChecked}"
                                                      onchange="{!c.handleIDNumberAllRelatedPartiesChecked}" type="button" />
                                <lightning:inputField aura:id="iDNumberAllRelatedPartiesCheckedValue" fieldName="SV_ID_Number_All_Related_Parties_Checked__c" class="slds-hide"/> 
                            </span>
                        </div>            
                    </div>
                    <br/>                 
                    
                    
                    
                    <div><p><b>Security Validation - CASA Info</b></p></div> 
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="primaryCustomerScreeningCompleteGroup"
                                                      label="Screening for Primary Customer complete"
                                                      options="{!v.primaryCustomerScreeningCompleteOptions}" value="{!v.primaryCustomerScreeningComplete}"
                                                      onchange="{!c.handlePrimaryCustomerScreeningComplete}" type="button" />
                                <lightning:inputField aura:id="primaryCustomerScreeningCompleteValue" fieldName="SV_Primary_Customer_Screening_Complete__c" class="slds-hide"/>   
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="secondTierGroup"
                                                      label="2nd tier"
                                                      options="{!v.secondTierOptions}" value="{!v.secondTier}"
                                                      onchange="{!c.handleSecondTier}" type="button" />
                                <lightning:inputField aura:id="secondTierValue" fieldName="SV_2nd_Tier__c" class="slds-hide"/>                 
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>             
                                <lightning:radioGroup aura:id="qAGroup"
                                                      label="QA"
                                                      options="{!v.qAOptions}" value="{!v.qA}"
                                                      onchange="{!c.handleQA}" type="button" />
                                <lightning:inputField aura:id="qAValue" fieldName="SV_QA__c" class="slds-hide"/>
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>           
                                <lightning:radioGroup aura:id="proofOfAddressGroup"
                                                      label="Proof of Address"
                                                      options="{!v.proofOfAddressOptions}" value="{!v.proofOfAddress}"
                                                      onchange="{!c.handleProofOfAddress}" type="button" />
                                <lightning:inputField aura:id="proofOfAddressValue" fieldName="SV_Proof_Of_Address__c" class="slds-hide"/>  
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>                
                                <lightning:radioGroup aura:id="relatedPartiesScreeningCompletedGroup"
                                                      label="Screening completed for all related parties"
                                                      options="{!v.relatedPartiesScreeningCompletedOptions}" value="{!v.relatedPartiesScreeningCompleted}"
                                                      onchange="{!c.handleRelatedPartiesScreeningCompleted}" type="button" />
                                <lightning:inputField aura:id="relatedPartiesScreeningCompletedValue" fieldName="SV_Related_Parties_Screening_Completed__c" class="slds-hide"/>   
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="independentCIPRODocumentObtainedGroup"
                                                      label="Independent CIPRO document obtained"
                                                      options="{!v.independentCIPRODocumentObtainedOptions}" value="{!v.independentCIPRODocumentObtained}"
                                                      onchange="{!c.handleIndependentCIPRODocumentObtained}" type="button" />
                                <lightning:inputField aura:id="independentCIPRODocumentObtainedValue" fieldName="SV_Independent_CIPRO_Document_Obtained__c" class="slds-hide"/>                 
                            </span>
                        </div>               
                    </div>
                    <br/>      
                    
                    <div><p><b>Security Validation - CIF Info</b></p></div> 
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>               
                                <lightning:radioGroup aura:id="cIFValCIF07Group"
                                                      label="Existing Client : CIF07 Print On File And Validateed On CIF"
                                                      options="{!v.cIFValCIF07Options}" value="{!v.cIFValCIF07}"
                                                      onchange="{!c.handleCIFValCIF07}" type="button" />
                                <lightning:inputField aura:id="cIFValCIF07Value" fieldName="SV_Existing_Client_CIF_Val_CIF07__c" class="slds-hide"/>   
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>  
                                <lightning:radioGroup aura:id="cIFAddressValidatedGroup"
                                                      label="Existing Client : Client Address Validateed On CIF"
                                                      options="{!v.cIFAddressValidatedOptions}" value="{!v.cIFAddressValidated}"
                                                      onchange="{!c.handleCIFAddressValidated}" type="button" />
                                <lightning:inputField aura:id="cIFAddressValidatedValue" fieldName="SV_Existing_Client_CIF_Address_Validated__c" class="slds-hide"/>     
                                
                            </span>
                        </div>               
                    </div>
                    <br/> 
                    
                    
                    <div><p><b>Security Validation - Signed contract</b></p></div> 
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>                 
                                <lightning:radioGroup aura:id="creditAGMTNameRegistrationCIFGroup"
                                                      label="Name And Registration Number On Credit Agreement Is Correct As Per Supporting CIF Document"
                                                      options="{!v.creditAGMTNameRegistrationCIFOptions}" value="{!v.creditAGMTNameRegistrationCIF}"
                                                      onchange="{!c.handleCreditAGMTNameRegistrationCIF}" type="button" />
                                <lightning:inputField aura:id="creditAGMTNameRegistrationCIFValue" fieldName="SV_Credit_AGMT_Name_Registration_CIF__c" class="slds-hide"/>   
                            </span>
                        </div>               
                    </div>
                    <br/>                    
                    
                    <div><p><b>Security Validation - Credit Approval</b></p></div> 
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>                          
                                <lightning:radioGroup aura:id="signedMandatedSanctionerGroup"
                                                      label="Signed By Mandated Sanctioner"
                                                      options="{!v.signedMandatedSanctionerOptions}" value="{!v.signedMandatedSanctioner}"
                                                      onchange="{!c.handleSignedMandatedSanctioner}" type="button" />
                                <lightning:inputField aura:id="signedMandatedSanctionerValue" fieldName="SV_Signed_By_Mandated_Sanctioner__c" class="slds-hide"/>   
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span> 
                                <lightning:radioGroup aura:id="isValidHasNotExpiredGroup"
                                                      label="Is Valid, Has Not Expired"
                                                      options="{!v.isValidHasNotExpiredOptions}" value="{!v.isValidHasNotExpired}"
                                                      onchange="{!c.handleIsValidHasNotExpired}" type="button" />
                                <lightning:inputField aura:id="isValidHasNotExpiredValue" fieldName="SV_Is_Valid_Has_Not_Expired__c" class="slds-hide"/>                 
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>            
                                <lightning:radioGroup aura:id="sMSSecuritiesApprovalConditionsGroup"
                                                      label="All Securities In Order On Sms As Per Approval Conditions"
                                                      options="{!v.sMSSecuritiesApprovalConditionsOptions}" value="{!v.sMSSecuritiesApprovalConditions}"
                                                      onchange="{!c.handleSMSSecuritiesApprovalConditions}" type="button" />
                                <lightning:inputField aura:id="sMSSecuritiesApprovalConditionsValue" fieldName="SV_SMS_Securities_Approval_Conditions__c" class="slds-hide"/>
                            </span>
                        </div>               
                    </div>
                    <br/>                    
                    
                    
                    
                    <div><p><b>Security Validation - Security Documents</b></p></div> 
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>                     
                                <lightning:radioGroup aura:id="draftedByBusinessBankGroup"
                                                      label="Drafted By Business Bank And Must Not Be Captured On SMS By PC"
                                                      options="{!v.draftedByBusinessBankOptions}" value="{!v.draftedByBusinessBank}"
                                                      onchange="{!c.handleDraftedByBusinessBank}" type="button" />
                                <lightning:inputField aura:id="draftedByBusinessBankValue" fieldName="SV_Drafted_By_Business_Bank_Not_On_SMS__c" class="slds-hide"/>   
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>  
                                <lightning:radioGroup aura:id="draftedByCAFPCGroup"
                                                      label="Security Documents Drafted By CAF PC And Must Be Captured On SMS"
                                                      options="{!v.draftedByCAFPCOptions}" value="{!v.draftedByCAFPC}"
                                                      onchange="{!c.handleDraftedByCAFPC}" type="button" />
                                <lightning:inputField aura:id="draftedByCAFPCValue" fieldName="SV_Drafted_By_CAF_PC_Capture_On_SMS__c" class="slds-hide"/>                 
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>               
                                <lightning:radioGroup aura:id="suretyshipLegallyCorrectGroup"
                                                      label="Suretyship/S Is/Are Legally Correct And Signed By All Parties"
                                                      options="{!v.suretyshipLegallyCorrectOptions}" value="{!v.suretyshipLegallyCorrect}"
                                                      onchange="{!c.handleSuretyshipLegallyCorrect}" type="button" />
                                <lightning:inputField aura:id="suretyshipLegallyCorrectValue" fieldName="SV_Suretyship_Legally_Correct_All_Sigs__c" class="slds-hide"/>
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>           
                                <lightning:radioGroup aura:id="correctSuretyDocumentsGroup"
                                                      label="Were The Correct Surety Documents Used In Terms Of NCA"
                                                      options="{!v.correctSuretyDocumentsOptions}" value="{!v.correctSuretyDocuments}"
                                                      onchange="{!c.handleCorrectSuretyDocuments}" type="button" />
                                <lightning:inputField aura:id="correctSuretyDocumentsValue" fieldName="SV_Correct_Surety_Documents_NCA__c" class="slds-hide"/>   
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>  
                                <lightning:radioGroup aura:id="otherSecurityDocumentationGroup"
                                                      label="Other security / documentation in order"
                                                      options="{!v.otherSecurityDocumentationOptions}" value="{!v.otherSecurityDocumentation}"
                                                      onchange="{!c.handleOtherSecurityDocumentation}" type="button" />
                                <lightning:inputField aura:id="otherSecurityDocumentationValue" fieldName="SV_Other_Security_Documentation_In_Order__c" class="slds-hide"/> 
                            </span>
                        </div>               
                    </div>
                    <br/>                    
                    
                    
                    <div><p><b>Security Validation - Resolution</b></p></div> 
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <lightning:radioGroup aura:id="transactionResolutionGroup"
                                                      label="Transaction Resolution Has Been Obtained And Is In Order"
                                                      options="{!v.transactionResolutionOptions}" value="{!v.transactionResolution}"
                                                      onchange="{!c.handleTransactionResolution}" type="button" />
                                <lightning:inputField aura:id="transactionResolutionValue" fieldName="SV_Transaction_Resolution_Obtained__c" class="slds-hide"/>   
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>    
                                <lightning:radioGroup aura:id="securityResolutionGroup"
                                                      label="Security Resolution/S Is/Are In Order"
                                                      options="{!v.securityResolutionOptions}" value="{!v.securityResolution}"
                                                      onchange="{!c.handleSecurityResolution}" type="button" />
                                <lightning:inputField aura:id="securityResolutionValue" fieldName="SV_Security_Resolution_S_Is_Are_In_Order__c" class="slds-hide"/>                 
                                
                            </span>
                        </div>               
                        <div class="slds-col slds-size_1-of-2">
                            <span>                
                                <lightning:radioGroup aura:id="section45LetterGroup"
                                                      label="Section 45 of the New Companies Act letters obtained"
                                                      options="{!v.section45LetterOptions}" value="{!v.section45Letter}"
                                                      onchange="{!c.handleSection45Letter}" type="button" />
                                <lightning:inputField aura:id="section45LetterValue" fieldName="SV_Section_45_Letters_Obtained__c" class="slds-hide"/>
                                
                            </span>
                        </div>               
                    </div>
                    <br/>                    
                    
                    
                </lightning:accordionSection>
            </lightning:accordion>
            
            <lightning:accordion activeSectionName="{! v.activeSections2 }" allowMultipleSectionsOpen="true" >
                
                <lightning:accordionSection name="SecurityValidatorDecision" label="Decision"> 
                    
                    <div class="slds-grid slds-wrap slds-gutters_medium">
                        <div class="slds-col slds-size_1-of-2">
                            <span>
                                <ul class="decision-btn">
                                    <li>
                                        <lightning:button name="GrantButton" label="Approve" aura:id="grantclicked"  class="grantbuttonbackground" onclick="{!c.onGrantButtonClick}">
                                            <lightning:icon iconName="action:approval" alternativeText="Approved" title="Approval" size="large" label="Grant"/>  
                                        </lightning:button>
                                        <p>Grant</p>
                                    </li>
                                    <li>
                                        <lightning:button type="RequestInfo" name="InfoRequested" label="InfoRequested" aura:id="moreInfoId"  class="decline" onclick="{!c.onRequestMoreInfoClick}">
                                            <lightning:icon iconName="action:info" alternativeText="More Information Requested" title="More Info Requested" size="large" />
                                        </lightning:button>
                                        <p>More Info Requested</p>
                                    </li>
                                    
                                </ul>
                                
                            </span>
                        </div>
                        <aura:if isTrue="{!v.approvalStatus != Null}"> 
                            <div class="slds-col slds-size_1-of-2">
                                <span>
                                    <lightning:textarea variant="bottom-toolbar" label = "Comments" aura:id="decisionComments" onchange="{!c.onCommentChange}"/>
                                </span>
                            </div>  
                            
                            <aura:if isTrue="{!v.approvalStatus == 'Approved'}">      
                                <div class="slds-col slds-size_1-of-2">
                                    <span>   
                                        
                                    </span>
                                </div> 
                            </aura:if>      
                            <aura:if isTrue="{!v.approvalStatus == 'Requested More Information'}">      
                                <div class="slds-col slds-size_1-of-2">
                                    <span>   
                                        <lightning:inputField aura:id="rejectedReasons" fieldName="SV_Reason_for_More_Info__c" /> 
                                    </span>
                                </div> 
                            </aura:if>   
                            
                            <div class="slds-col slds-size_1-of-2">
                                <span>
                                    <lightning:input type="checkbox" label="I understand that this decision cannot be changed once submitted."
                                                     aura:id="attestDecision" default="unchecked" onchange="{! c.onAttestDecision}"/> 
                                    
                                    
                                    <aura:if isTrue="{!v.isSubmitDecision}"> 
                                        <lightning:button variant="brand"
                                                          aura:id="submitDecision"
                                                          label="Submit"
                                                          title="Submit"
                                                          type="submit"
                                                          class="slds-button slds-button_brand slds-m-top--medium"
                                                          onclick="{!c.submitDecision}"/> 
                                        
                                    </aura:if>     
                                </span>
                            </div>
                            <aura:if isTrue="{!v.approvalStatus == 'Requested More Information'}"> 
                                <div class="slds-col slds-size_1-of-2">
                                    <span>   
                                        <lightning:inputField aura:id="informationSource" fieldName="Information_Source__c" /> 
                                    </span>
                                </div>  
                            </aura:if> 
                        </aura:if>     
                    </div>
                    
                </lightning:accordionSection>
                
                
                <lightning:accordionSection name="decisionHistory" label="Decision History"> 
                    
                    <lightning:datatable data="{! v.gridData }"
                                         columns="{! v.gridColumns }"
                                         keyField="Id"
                                         hideCheckboxColumn="true"/>    
                    
                </lightning:accordionSection>
            </lightning:accordion>
        </lightning:recordEditForm>
    </div>
</aura:component>