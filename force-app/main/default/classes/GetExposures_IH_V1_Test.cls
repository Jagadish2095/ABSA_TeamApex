/*
* Integration Handler Test class for GetExposures Service
* @author :Himani Joshi
* @created 2020-09-22
*/
@isTest
public class GetExposures_IH_V1_Test {
    public static final String POSITIVE_RESPONSE_BODY = '{"GSB001O":{"GSB001O":{"GSB001O_OUTPUT_FIELDS":{"controlOffNum":0,    "participationBond":0,"clientName":"  SNIFFELS (PTY) LTD","termDeposits":0,"mortgagePrePaid":0,"overControlSite":0,"cpfPrePaid":0,  "custInvAccInd":"","controlBranch":0,"contOffEmployeeName":"","riskGradeOrig":"","worstArmsRisk":"INS","cheqInCredit":15627,"savings":0,  "custInvestAcc":0,"otherCash":220707,"worstArmsHold":"BDH","contOffEmployeeNum":"0000000","armsEwlStatus":"","fleetInCredit":0,   "noticeDeposits":0,"pensBackPrePaid":0,"otherCashTrea":"","fleetCashAdvance":0,"controlOff":"","afcInCredit":0,"noOfOccurences":6, "prodDetail":[{"excessArrears":1915533,"productOrTotal":"TERMLN","exposure":3197722,"liability":3197722,"installment":54761,"limit":0,   "subHeaderInd":"O","arrearsInd":"A","prodAreaLimit":0},{"excessArrears":481395,"productOrTotal":"CHEQ","exposure":5481395, "liability":5481395,"installment":137034,"limit":5000000,"subHeaderInd":"O","arrearsInd":"-","prodAreaLimit":5000000},{"excessArrears":0,    "productOrTotal":"WJ026","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"O","arrearsInd":"","prodAreaLimit":0},    {"excessArrears":7598,"productOrTotal":"CCARD","exposure":9002,"liability":9002,"installment":9002,"limit":7000,"subHeaderInd":"O", "arrearsInd":"A","prodAreaLimit":7000},{"excessArrears":0,"productOrTotal":"ORDINARY","exposure":8688119,"liability":8688119,    "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"CLIENT TOT",    "exposure":8688119,"liability":8688119,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,    "liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"",    "exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,   "productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}, {"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"",   "prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,"subHeaderInd":"",  "arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,"limit":0,   "subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,"installment":0,    "limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0},{"excessArrears":0,"productOrTotal":"","exposure":0,"liability":0,   "installment":0,"limit":0,"subHeaderInd":"","arrearsInd":"","prodAreaLimit":0}],"creditCard":0,"riskGrade":""}}},"NBSAPDPO":{"NBSAPLO":    {"NBNAPLO_ECHO_KEY":"","NBNAPLO_REASON_CODE":0,"NBNAPLO_RETURN_CODE":0,"NBNAPLO_VERSION":"","NBNAPLO_SERVICE_VERSION":"BUSO003"}},  "NBSMSGO3":{"NBSMSGO3":{"NBNMSGO3_NBR_USER_ERRS":0,"NBSMSGO3_VERSION":"","NBNMSGO3_SYS_ERR_TXT":"","NBNMSGO3_NBR_USER_MSGS":0,    "NBNMSGO3_MSG_ENTRY":[{"NBNMSGO3_MSG_ERR_IND":"","NBNMSGO3_MSG_TXT":"","NBNMSGO3_MSG_CLASS":"","NBNMSGO3_MSG_CODE":""}, {"NBNMSGO3_MSG_ERR_IND":"","NBNMSGO3_MSG_TXT":"","NBNMSGO3_MSG_CLASS":"","NBNMSGO3_MSG_CODE":""},{"NBNMSGO3_MSG_ERR_IND":"", "NBNMSGO3_MSG_TXT":"","NBNMSGO3_MSG_CLASS":"","NBNMSGO3_MSG_CODE":""},{"NBNMSGO3_MSG_ERR_IND":"","NBNMSGO3_MSG_TXT":"",  "NBNMSGO3_MSG_CLASS":"","NBNMSGO3_MSG_CODE":""},{"NBNMSGO3_MSG_ERR_IND":"","NBNMSGO3_MSG_TXT":"","NBNMSGO3_MSG_CLASS":"", "NBNMSGO3_MSG_CODE":""}]}}}';

    @TestSetup
    static void makeData(){
        IntegrationTestDataFactory.insertIntegrationSettings(StringConstants.JITTERBIT2, new List<String>{GetExposures_IH_v1.INTEGRATION_SERVICE_NAME});
    }

    @isTest
    static void testPositive() {
        // Set mock callout class
        exposuresTestMock();

        Test.startTest();

           GetExposures_Resp_IB_v1 responseBean = callHandlerMethod();
        System.assertEquals(200, responseBean.statusCode);

        Test.stopTest();
    }

    private static GetExposures_Resp_IB_v1 callHandlerMethod() {
        GetExposures_Resp_IB_v1 responseBean = GetExposures_IH_v1.GetExposures('SNIFFEL001');
        return responseBean;
    }

    /**
    * @description 
    * @author Himani Joshi | 2021-06-10 
    **/
    public static void exposuresTestMock() {
        Test.setMock(HttpCalloutMock.class, new Sys_Utilities_Integration_Mock_ApiRest(StringConstants.POSITIVE_STRING,POSITIVE_RESPONSE_BODY));
    }
}