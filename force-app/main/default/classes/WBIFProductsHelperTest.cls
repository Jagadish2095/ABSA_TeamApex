/**
* @description Test Class for Absa Life Products
* @author  Brian Maswanganyi
* @created 2021-10-13
*/
@isTest
public class WBIFProductsHelperTest {
    
    public static final String GET_WIMI_PRODUCT_POSITIVE = '{"Product_GetResponse":{"Product_GetResult":{"Benefits":{"BenefitOption":[{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},{"Cover":0,"FormID":"","ID":250021000,"IsDefault":false,"Name":"Spouse","Premium":0,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":50},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":70},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":90},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":110},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":160},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":215}]}},{"Cover":0,"FormID":"","ID":250022000,"IsDefault":false,"Name":"Child","Premium":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":20},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":25},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":30},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":35}]}},{"Cover":0,"FormID":"","ID":250023000,"IsDefault":false,"Name":"Parent","Premium":0,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":75},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":110},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":145},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":180}]}}]},"CommissionRules":"","ContractOptions":{"ContractOption":[{"Benefits":{"BenefitOption":[{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},{"Cover":0,"FormID":"","ID":250021000,"IsDefault":false,"Name":"Spouse","Premium":0,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":50},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":70},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":90},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":110},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":160},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":215}]}},{"Cover":0,"FormID":"","ID":250022000,"IsDefault":false,"Name":"Child","Premium":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":20},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":25},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":30},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":35}]}},{"Cover":0,"FormID":"","ID":250023000,"IsDefault":false,"Name":"Parent","Premium":0,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":75},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":110},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":145},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":180}]}}]},"Default":{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},"FormID":"","ID":250000001,"IsDefault":false,"Key":250000001,"Name":"Option 01: R 400","PremiumRules":""},{"Benefits":{"BenefitOption":[{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},{"Cover":0,"FormID":"","ID":250021000,"IsDefault":false,"Name":"Spouse","Premium":0,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":50},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":70},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":90},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":110},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":160},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":215}]}},{"Cover":0,"FormID":"","ID":250022000,"IsDefault":false,"Name":"Child","Premium":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":20},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":25},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":30},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":35}]}},{"Cover":0,"FormID":"","ID":250023000,"IsDefault":false,"Name":"Parent","Premium":0,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":75},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":110},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":145},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":180}]}}]},"Default":{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},"FormID":"","ID":250000002,"IsDefault":false,"Key":250000002,"Name":"Option 02: R 600","PremiumRules":""},{"Benefits":{"BenefitOption":[{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},{"Cover":0,"FormID":"","ID":250021000,"IsDefault":false,"Name":"Spouse","Premium":0,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":50},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":70},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":90},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":110},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":160},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":215}]}},{"Cover":0,"FormID":"","ID":250022000,"IsDefault":false,"Name":"Child","Premium":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":20},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":25},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":30},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":35}]}},{"Cover":0,"FormID":"","ID":250023000,"IsDefault":false,"Name":"Parent","Premium":0,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":75},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":110},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":145},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":180}]}}]},"Default":{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},"FormID":"","ID":250000003,"IsDefault":false,"Key":250000003,"Name":"Option 03: R 800","PremiumRules":""},{"Benefits":{"BenefitOption":[{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},{"Cover":0,"FormID":"","ID":250021000,"IsDefault":false,"Name":"Spouse","Premium":0,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":50},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":70},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":90},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":110},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":160},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":215}]}},{"Cover":0,"FormID":"","ID":250022000,"IsDefault":false,"Name":"Child","Premium":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":20},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":25},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":30},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":35}]}},{"Cover":0,"FormID":"","ID":250023000,"IsDefault":false,"Name":"Parent","Premium":0,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":75},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":110},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":145},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":180}]}}]},"Default":{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},"FormID":"","ID":250000004,"IsDefault":false,"Key":250000004,"Name":"Option 04: R 1000","PremiumRules":""},{"Benefits":{"BenefitOption":[{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},{"Cover":0,"FormID":"","ID":250021000,"IsDefault":false,"Name":"Spouse","Premium":0,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":50},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":70},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":90},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":110},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":160},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":215}]}},{"Cover":0,"FormID":"","ID":250022000,"IsDefault":false,"Name":"Child","Premium":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":20},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":25},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":30},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":35}]}},{"Cover":0,"FormID":"","ID":250023000,"IsDefault":false,"Name":"Parent","Premium":0,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":75},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":110},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":145},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":180}]}}]},"Default":{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},"FormID":"","ID":250000005,"IsDefault":false,"Key":250000005,"Name":"Option 05: R 1500","PremiumRules":""},{"Benefits":{"BenefitOption":[{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},{"Cover":0,"FormID":"","ID":250021000,"IsDefault":false,"Name":"Spouse","Premium":0,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":50},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":70},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":90},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":110},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":160},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":215}]}},{"Cover":0,"FormID":"","ID":250022000,"IsDefault":false,"Name":"Child","Premium":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":20},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":25},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":30},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":35}]}},{"Cover":0,"FormID":"","ID":250023000,"IsDefault":false,"Name":"Parent","Premium":0,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":75},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":110},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":145},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":180}]}}]},"Default":{"Cover":0,"FormID":"","ID":250020000,"IsDefault":false,"Name":"Main Member","Premium":0,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"CoverOptions":{"CoverOption":[{"Cover":0,"IsDefault":false,"Name":"","Premium":0},{"Cover":400,"IsDefault":true,"Name":"R 400","Premium":0},{"Cover":600,"IsDefault":false,"Name":"R 600","Premium":0},{"Cover":800,"IsDefault":false,"Name":"R 800","Premium":0},{"Cover":1000,"IsDefault":false,"Name":"R 1000","Premium":0},{"Cover":1500,"IsDefault":false,"Name":"R 1500","Premium":0},{"Cover":2000,"IsDefault":false,"Name":"R 2000","Premium":0}]}},"FormID":"","ID":250000006,"IsDefault":false,"Key":250000006,"Name":"Option 06: R 2000","PremiumRules":""}]},"LoadingOptions":"","PremiumRules":"","ProductIdentifier":250000000,"ProductName":"ABSA Health Assistance Cover","Targets":{"PolicyTarget":[{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"}]},"UnderwritingOptions":"","ValidationRules":{"ValidationRule":[{"Maximum":65,"Minimum":18,"Target":{"ID":1,"Name":"Main Member","SubType":"Main","Type":"Main"},"ValidationType":"Age"},{"Maximum":65,"Minimum":18,"Target":{"ID":2,"Name":"Spouse","SubType":"Dependent","Type":"Spouse"},"ValidationType":"Age"},{"Maximum":25,"Minimum":0,"Target":{"ID":3,"Name":"Child","SubType":"Dependent","Type":"Child"},"ValidationType":"Age"},{"Maximum":65,"Minimum":40,"Target":{"ID":4,"Name":"Parent","SubType":"Dependent","Type":"Other"},"ValidationType":"Age"}]}}}}';
    @testSetup
    static void makeData(){
        IntegrationTestDataFactory.insertIntegrationSettings(
            StringConstants.API_MANAGER,
            new List<String>{ StringConstants.WBIF_AMCDF_PRODUCTGET }
        );
        
        String auniqueUserName = 'UserAdmin' + DateTime.now().getTime() + '@testorg.com';
        String aemail = 'UserAdmin@testorg.com';
        Profile ap = [SELECT Id FROM Profile WHERE Name = 'Standard User (Branch)'];
        User au = new User(
            Alias = 'standt',
            Email = aemail,
            EmailEncodingKey = 'UTF-8',
            LastName = 'UserAdmin',
            LanguageLocaleKey = 'en_US',
            LocaleSidKey = 'en_US',
            ProfileId = ap.Id,
            TimeZoneSidKey = 'Africa/Johannesburg',
            UserName = auniqueUserName,
            MobilePhone = '0823389021',
            Advisor_Code__c = '112233'
        );
        insert au;
    }
    
    @isTest
    static void getWbifProductCoverOptionsContractOptionIdTest(){
        Test.setMock(HttpCalloutMock.class, new Sys_Utilities_Integration_Mock_ApiRest(StringConstants.POSITIVE_STRING, GET_WIMI_PRODUCT_POSITIVE));
        
        User au = new User();
        Set<String> userEmails = new Set<String>();
        userEmails.add('UserAdmin@testorg.com');
        List<User> userList = new UsersSelector().selectByEmail(userEmails);
        if (userList.size() > 0) {
            for (User u : userList) {
                if (u.Email == 'UserAdmin@testorg.com') {
                    au = u;
                }
            }
        }
        
        System.runAs(au) {
            Test.startTest();
        	WBIF_Product_Details productDetails = WBIFProductsHelper.getWbifProductCoverOptions('WIMAL00102');
            String benefitId = WBIFProductsHelper.getBenefitId(productDetails, 'Spouse');            
            System.assert(productDetails != null, 'Product Details is not null');
            System.assert(productDetails.MemberTypes.size() > 0, 'Has Member Types');
            System.assert(benefitId !=null && benefitId != '00000000', 'Get a valid benefit Id');
            Test.stopTest();
        }
    }
    
        @isTest
    static void getWbifProductCoverOptionsTest(){
        Test.setMock(HttpCalloutMock.class, new Sys_Utilities_Integration_Mock_ApiRest(StringConstants.POSITIVE_STRING, GET_WIMI_PRODUCT_POSITIVE));
        
        User au = new User();
        Set<String> userEmails = new Set<String>();
        userEmails.add('UserAdmin@testorg.com');
        List<User> userList = new UsersSelector().selectByEmail(userEmails);
        if (userList.size() > 0) {
            for (User u : userList) {
                if (u.Email == 'UserAdmin@testorg.com') {
                    au = u;
                }
            }
        }
        
        System.runAs(au) {
            Test.startTest();
        	WBIF_Product_Details productDetails = WBIFProductsHelper.getWbifProductCoverOptions('WIMAL00102');
            String contractOption800 = WBIFProductsHelper.getContractOptionId(productDetails, '800');   
            System.assert(productDetails != null, 'Product Details is not null');
            System.assert(productDetails.MemberTypes.size() > 0, 'Has Member Types');
            System.assert(contractOption800 !=null && contractOption800 == '250000003', 'Get a valid benefit Id');
            Test.stopTest();
        }
    }
    
    
}