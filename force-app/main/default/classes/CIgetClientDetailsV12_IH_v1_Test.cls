/**
 * @description       : Test Integration Handler Bean for CIgetClientDetailsV12 Service
 * @author            : Prudence Shirindzi
 * @created 2020-10-07
 * @last modified on  : 2021-11-30
 * @last modified by  : PaulJohn.duRand@absa.africa
 * Modifications Log
 * Ver   Date         Author                        Modification
 * 1.0   2021-07-23   PaulJohn.duRand@absa.africa   Client Group Translation
 **/

@isTest
public class CIgetClientDetailsV12_IH_v1_Test {
	public static final String POSITIVE_RESPONSE_BODY = '{ "CIgetClientDetailsV12Response": { "nbsapdpo": { "version": [], "returnCode": "0", "reasonCode": "0", "serviceVersion": "BUSO013", "echoKey": [] }, "nbsmsgo3": { "version": "MSG3001", "sysErrTxt": [], "nbrUserMsgs": "0", "nbrUserErrs": "0" }, "cip002o": { "indCifRecFound": "Y", "clientCode": "NGOBEH 011", "initials": "H", "language": "E", "titleCode": "1", "surname": "NGOBENI", "postlAddrLine1": "THE FILE 1232", "postlAddrLine2": "OUDAAS DISHAF LETSELA", "postlSuburb": [], "postlTown": "RANDBURG", "postlCodeRsa": "2194", "idDocType": "1", "idNumber": "8406175966085", "birthDate": "19840617", "maritalStatus": "3", "smsMarkInd": "N", "gender": "1", "minorChildren": "1", "occupationCode": "47", "incomeGroup": "19", "bankingSector": "1", "securityIndicator": [], "liabilityIndicator": [], "telebankIndicator": [], "unclaimedFundsInd": [], "branchClientOpened": "8198", "dateClientOpened": "20181128", "changeNumber": "376", "dateLastChanged": "20200923", "siteLastChanged": "0", "tellerLastChanged": "0", "nbrOfAccounts": "25", "prohibitedInd": "N", "postalAddrHold": "N", "absaRewardIndctor": "N", "idRequiredHold": "N", "deceasedEstateHld": "N", "deceasedSpouseHld": "N", "insolvntEstateHld": "N", "curatorshipHold": "N", "savngStatementHold": "N", "courtAuthrityHold": "N", "thirdPartyInd": "Y", "mandateCaptureHld": "Y", "powerAttornyHold": "Y", "sbuSegment": "F", "mariageContrctType": "0", "homeLanguage": "G", "marketingConcent": "N", "clientType": "101", "miltaryComtmntInd": "N", "occupationType": "O", "noOfJointPartcpnt": "0", "taxNumber": "0", "sicCode": "0", "firstNames": "HERALD", "insolventIndicator": "N", "companyYearEnd": "0", "homeTelCode": "0", "homeTelephone": [], "workTelCode": "0", "workTelephone": [], "physicalAddrHold": "N", "employerAddrHold": "N", "cellphone": "663782063", "faxWorkCode": "0", "faxWorkNumber": "0", "faxHomeCode": "0", "faxHomeNumber": "0", "occupationStatus": "1", "employmentSector": "11", "occupationLevel": "5", "practiceNumber": [], "clientWebsite": [], "contactPerson": [], "designation": "0", "emailAddress": "WHOSHERALD@MAIL.COM", "inliPolicy": [], "exliPolicy": [], "instPolicy": [], "exstPolicy": [], "inivPolicy": [], "flexiFuneralPolicy": [], "prefrdCommtionMthd": "2", "cellphoneBankInd": [], "siccCode5": "00000", "subSegment": "F1", "emailMarkInd": "N", "teleMarkInd": "N", "internetBankinInd": [], "sourceOfIncome": "20", "dateIdentified": "28072020", "dateVerified": "23072020", "employeeIdentified": "1173122", "employeeVerified": "1173122", "vatRegistrationNo": [], "clientNationality": "SOU01", "countryOfOrigin": [], "dateNClntExempted": "0", "dateAClntExempted": [], "statusOfExemption": "N", "exemptionIndicator": "00", "corporateDivision": "A", "postMatricQualifd": "N", "postMatricQualfton": "0", "receiveSocialGrant": "N", "notifyMeIndicator": "Y", "mailInd": "N", "applyDebtCounsel": "N", "dteApplyCounsel": "0", "counselOrderIssue": "N", "dteOrderIssue": "0", "groupScheme": "99999", "groupSchemeEmp": [], "secondaryCard": "N", "affectedPerson": "0", "exconExpiryDate": "0", "dateIssued": "3122012", "ibrAffected": "N", "clientGroup": "I", "nbrOfAddressesRtrv": "4", "addressEntry": [ { "addrType": "10", "addrSeqNbr": "0", "addrLine1": "THE FILE 1232", "addrLine2": "OUDAAS DISHAF LETSELA", "addrSuburbRsa": [], "addrTown": "RANDBURG", "addrPostlCode": "2194" }, { "addrType": "0", "addrSeqNbr": "0", "addrLine1": [], "addrLine2": [], "addrSuburbRsa": [], "addrTown": [], "addrPostlCode": "0" }, { "addrType": "0", "addrSeqNbr": "0", "addrLine1": [], "addrLine2": [], "addrSuburbRsa": [], "addrTown": [], "addrPostlCode": "0" }, { "addrType": "70", "addrSeqNbr": "0", "addrLine1": "ABASD", "addrLine2": "ROSEBANK TOWERS 15 BIERMANN AV", "addrSuburbRsa": [], "addrTown": "RANDBURG", "addrPostlCode": "2194" }, { "addrType": "0", "addrSeqNbr": "0", "addrLine1": [], "addrLine2": [], "addrSuburbRsa": [], "addrTown": [], "addrPostlCode": "0" } ], "clsPercEntry": [ { "classification": [], "percentage": "0" }, { "classification": [], "percentage": "0" }, { "classification": [], "percentage": "0" } ], "tempPermitNbr": [], "permitExpDte": "0", "subClassCde": [], "countryIncorp": [], "inBusinessRescue": [], "placedBy": "0", "dateBusRescueIss": "0", "ncaThreshold": [], "cpaThreshold": [], "nkinSurname": "NGOBENI", "nkinFname": "JEFFREY", "nkinRela": "2", "nkinDcdh": [], "nkinTelh": [], "nkinDcdw": [], "nkinTelw": [], "nkinCell": "0715922797", "nkinEmail": "MJMLAMBYA@GMAIL.COM", "nkinTitle": "00", "nkinInitials": [], "nkinJntSurname": [], "reasonCodeO": "0", "duplClntCode": [ { "duplCode": [] }, { "duplCode": [] }, { "duplCode": [] } ], "forensicHold": "N", "updAddressInd": "Y", "updTelephoneInd": "Y", "updEmailInd": "N", "updDateInd": "19062020", "pingitWallet": "N", "pingitReceive": "N", "clntExstOnFica": "N", "regAddrLine1": "0", "regAddrLine2": [], "regSuburb": [], "regTown": "0", "regCodeRsa": "0", "hoAddrLine1": "0", "hoAddrLine2": [], "hoSuburb": [], "hoTown": "0", "hoCodeRsa": "0", "countryResAddress": "SO003", "countryHoAddress": [], "countryRegAddress": [], "countryEntOprtData": [ { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] }, { "countryEntOprt": [] } ], "countryOfBirth": "SO005", "mclInd": [], "finCrimeHold": "N", "clntAgrmntIssued": "Y", "sec129DeliveryAddr": "1", "saTaxRegis": "N", "rsonSaTaxNotGiven": [], "foreignTaxRegis": "N", "foreignTaxData": [ { "foreignTaxCtry": [], "foreignTaxNo": [], "rsonFtaxNotGiven": "0" }, { "foreignTaxCtry": [], "foreignTaxNo": [], "rsonFtaxNotGiven": "0" }, { "foreignTaxCtry": [], "foreignTaxNo": [], "rsonFtaxNotGiven": "0" }, { "foreignTaxCtry": [], "foreignTaxNo": [], "rsonFtaxNotGiven": "0" } ], "safeCustody": "N", "safeCustBoxSmall": "0", "safeCustBoxMedium": "0", "safeCustBoxLarge": "0", "safeCustEnvelope": "0", "nonCreditIndicator": "N", "nonCreditDateChanged": "20200619", "nonCreditSms": "N", "nonCreditEmail": "N", "nonCreditAvoice": "N", "nonCreditTelephone": "N", "nonCreditPost": "Y", "creditIndicator": "Y", "creditDateChanged": "20200619", "creditSms": "Y", "creditEmail": "N", "creditAvoice": "N", "creditTelephone": "N", "creditPost": "Y" } } }';

	@TestSetup
	static void setup() {
		IntegrationTestDataFactory.insertIntegrationSettings(
			StringConstants.JITTERBIT2,
			new List<String>{ CIgetClientDetailsV12_IH_v1.INTEGRATION_SERVICE_NAME }
		);
	}

	@isTest
	static void testPositive() {
		Test.setMock(HttpCalloutMock.class, new Sys_Utilities_Integration_Mock_ApiRest(StringConstants.POSITIVE_STRING, POSITIVE_RESPONSE_BODY));
		Test.startTest();
		CIgetClientDetailsV12_Resp_IB_v1 responseBean = CIgetClientDetailsV12_IH_v1.CIgetClientDetailsV12('009970', 'NGOBEH 011');
		System.assertEquals(200, responseBean.statusCode);
		Test.stopTest();
	}
}